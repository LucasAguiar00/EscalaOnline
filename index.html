<!DOCTYPE html>
<html>

<head>
    <title>Escala de Trabalho - Junho 2023</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .num_redondo {
            background-color: #018ccb;
            color: #ffffff;
            width: 120px;
            height: auto;
            border-radius: 15px;
            text-align: center;
            padding: 2px;
            margin: 2px auto;
        }


        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            grid-gap: 5px;
        }

        .day {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }

        .day:hover {
            transform: scale(1.2);
            background-color: lightblue;

        }

        .day.header {
            background-color: #000000;
            color: white;
        }

        .day.fds {
            background-color: #d45409;
            color: white;

        }

        .day.off {
            background-color: #c0c0c0;
        }

        .day.past {
            background-color: gray;
            color: aliceblue;

        }

        .day.hoje {
            background-color: rgba(133, 253, 129, 0.699);
            color: rgb(0, 0, 0);
            font-weight: bold;
        }
    </style>
</head>

<body>
    <h1>Escala de Trabalho - Junho 2023</h1>

    <span>
        <select name="funcionarios" id="funcionarios" onchange="selecionar_funcionario()">
            <option value="limpar"> </option>
            <option value="Lucas">Lucas</option>
            <option value="Leonardo">Leonardo</option>
        </select>
    </span>
    <br><br>


    <div class="calendar">
        <div class="day fds">Dom</div>
        <div class="day header">Seg</div>
        <div class="day header">Ter</div>
        <div class="day header">Qua</div>
        <div class="day header">Qui</div>
        <div class="day header">Sex</div>
        <div class="day fds">S√°b</div>

        <div class="day">-</div>
        <div class="day">-</div>
        <div class="day">-</div>
        <div class="day">-</div>
        <div class="day" id="day-1"></div>
        <div class="day" id="day-2"></div>
        <div class="day" id="day-3"></div>
        <div class="day" id="day-4"></div>
        <div class="day" id="day-5"></div>
        <div class="day" id="day-6"></div>
        <div class="day" id="day-7"></div>
        <div class="day" id="day-8"></div>
        <div class="day" id="day-9"></div>
        <div class="day" id="day-10"></div>
        <div class="day" id="day-11"></div>
        <div class="day" id="day-12"></div>
        <div class="day" id="day-13"></div>
        <div class="day" id="day-14"></div>
        <div class="day" id="day-15"></div>
        <div class="day" id="day-16"></div>
        <div class="day" id="day-17"></div>
        <div class="day" id="day-18"></div>
        <div class="day" id="day-19"></div>
        <div class="day" id="day-20"></div>
        <div class="day" id="day-21"></div>
        <div class="day" id="day-22"></div>
        <div class="day" id="day-23"></div>
        <div class="day" id="day-24"></div>
        <div class="day" id="day-25"></div>
        <div class="day" id="day-26"></div>
        <div class="day" id="day-27"></div>
        <div class="day" id="day-28"></div>
        <div class="day" id="day-29"></div>
        <div class="day" id="day-30"></div>
    </div>

    <script>
        function definirTurno(turno, dia) {
            const dayElement = document.getElementById(`day-${dia}`);
            if (dayElement) {
                //dayElement.innerText = `${dia}`;
                var modelo = `<div class="num_redondo">${dia}</div>`;
                dayElement.innerText += '\n'
                dayElement.innerText += `${turno}`
                dayElement.innerText += '\n'
                dayElement.innerHTML = modelo + dayElement.innerText
            }
        }

        function marcarDiasPassados() {
            const hoje = new Date();
            //console.log(hoje)
            const diaAtual = hoje.getDate();
            //console.log(diaAtual)

            for (let i = 1; i < diaAtual; i++) {
                const dayElement = document.getElementById(`day-${i}`);
                if (dayElement) {
                    dayElement.classList.add('past');
                    dayElement.innerHTML += '<br>'
                    dayElement.innerHTML += `‚úîÔ∏è`
                }
            }

            for (let j = diaAtual + 1; j < 31; j++) {
                const dayElement = document.getElementById(`day-${j}`);
                //dayElement.classList.add('past');
                dayElement.innerHTML += '<br>'
                dayElement.innerHTML += `‚åõ`
            }

            const dayElement = document.getElementById(`day-${diaAtual}`);
            dayElement.classList.add('hoje');
            dayElement.innerHTML += '<br>'
            dayElement.innerHTML += `üë®‚ÄçüíºüìäüìàüìÅ`
        }



        /*
        funcionario = {
            'limpar' : ['','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',''],
            'Lucas' : ['T. 18h_Lucas', 'T. 15h_Lucas', 'T. 09h_Lucas', 'Folga_Lucas', 'T. 18h_Lucas', 'T. 18h_Lucas', 'T. 18h_Lucas', 'F. Feriado_Lucas', 'Folga_Lucas', 'T. 07h_Lucas', 'T. 06h_Lucas', 'T. 00h_Lucas', 'T. 18h_Lucas', 'Folga_Lucas', 'T. 18h_Lucas', 'T. 18h_Lucas', 'Folga_Lucas', 'Folga_Lucas', 'T. 18h_Lucas', 'T. 18h_Lucas', 'T. 18h_Lucas', 'T. 18h_Lucas', 'T. 18h_Lucas', 'Folga_Lucas', 'T. 18h_Lucas', 'T. 18h_Lucas', 'T. 18h_Lucas', 'T. 18h_Lucas', 'T. 18h_Lucas', 'T. 18h_Lucas'],
            'Leonardo' : ['T. 18h_Leonardo', 'T. 18h_Leonardo', 'Folga_Leonardo', 'Fol. F_Leonardo', 'T. 18h_Leonardo', 'T. 18h_Leonardo', 'T. 18h_Leonardo', 'F. Feriado_Leonardo', 'T. 12h_Leonardo', 'T. 10h_Leonardo', 'Folga_Leonardo', 'T. 18h_Leonardo', 'T. 18h_Leonardo', 'T. 18h_Leonardo', 'T. 12h_Leonardo', 'T. 12h_Leonardo', 'Folga_Leonardo', 'T. 06h_Leonardo', 'T. 18h_Leonardo', 'T. 18h_Leonardo', 'T. 18h_Leonardo', 'T. 18h_Leonardo', 'Folga_Leonardo', 'T. 18h_Leonardo', 'T. 12h_Leonardo', 'T. 18h_Leonardo', 'Folga_Leonardo', 'T. 00h_Leonardo', 'T. 12h_Leonardo', 'T. 12h_Leonardo'],
        }*/

        //teste
        function atualizar() {
            funcionario['Lucas'][10 - 1] = 'T. 10h_Lucas'
            funcionario['Lucas'][11 - 1] = 'T. 18h_Lucas'
            funcionario['Lucas'][12 - 1] = 'T. 18h_Lucas'
            funcionario['Leonardo'][15 - 1] = 'T. 15h_Leonardo'
            funcionario['Leonardo'][16 - 1] = 'T. 18h_Leonardo'
        }


        function Definir_turno(vetor) {
            var dia = 1
            vetor.forEach(el => {
                definirTurno(el, dia)
                dia += 1
            });
        }

        function selecionar_funcionario() {
            var colaborador = document.getElementById("funcionarios").value

            limpar()
            atualizar()
            //console.log(`${funcionario}.${colaborador}`)
            Definir_turno(funcionario[colaborador])
            marcarDiasPassados();
        }

        function limpar() {
            for (let i = 1; i < 32; i++) {
                const dayElement = document.getElementById(`day-${i}`);
                if (dayElement) {
                    dayElement.innerHTML = ' '
                }
            }
        }


        fetch('funcionario.JSON')
            .then(response => response.json()) // ou response.text() se o arquivo n√£o for um JSON v√°lido
            .then(data => {
                funcionario = data;
                funcionario = funcionario[0];
                console.log(data);
            })
            .catch(error => {
                // Trate quaisquer erros que possam ocorrer durante o processo
                console.error('Ocorreu um erro:', error);
            });

       
            const fs = require('fs'); // Requer o m√≥dulo 'fs' para manipula√ß√£o de arquivos

        function atualizar_json(funcionario) {
            const jsonConteudo = JSON.stringify(funcionario);

            fs.writeFile('funcionario.json', jsonConteudo, 'utf8', (err) => {
                if (err) {
                    console.error('Ocorreu um erro ao atualizar o JSON:', err);
                    return;
                }

                console.log('JSON atualizado com sucesso!');
            });
        }



        // ... adicione mais chamadas √† fun√ß√£o definirTurno para os demais dias    
        //marcarDiasPassados();


    </script>
</body>

</html>